/*!
 * Mowe {ProjectName} Project v0.0.0 (http://letsmowe.org/)
 * Copyright 2013-2015 Mowe Developers
 * Licensed under MIT (https://github.com/mowekabanas/base/blob/master/LICENSE)
*/
var formSentCount,formSentTry,formSentCountLimit,formSentTryLimit;formSentCount=formSentTry=0,formSentCountLimit=formSentTryLimit=2;var requestURL="https://service.elbit.com.br/mailman/lairam/",formLocked=!1,form={viewport:document.getElementById("cForm")};form.fields={},form.sendButton={},form.fields.cName=document.getElementById("cName"),form.fields.cPhone=document.getElementById("cPhone"),form.fields.cEmail=document.getElementById("cEmail"),form.fields.cMessage=document.getElementById("cMessage"),form.sendButton.viewport=document.getElementById("cSubmit"),form.states=["is-error","is-fail","is-sending","is-success"],form.changeState=function(e){if(form.viewport){for(var t=form.states.length;t--;)form.viewport.classList.remove(form.states[t]);form.viewport.classList.add(e)}},form.changeStateError=function(e,t){this.changeState(e),"is-error"==e&&(form.viewport.querySelector(".ContactFormStatus-text--error").innerText=t)},form.sendRequest=function(e){if(e){var t=new XMLHttpRequest;formLocked=!0,form.changeState("is-sending"),t.ontimeout=function(t){console.log(t),form.changeState("is-fail"),formSentTry<formSentTryLimit&&form.send(e,5e3)},t.onerror=function(){form.changeState("is-error")},t.onreadystatechange=function(e){4==t.readyState&&(200==t.status?(console.log(t.responseText),form.changeState("is-success")):form.changeState("is-error")),formLocked=!1},t.open("GET",requestURL+"?"+form.requestParams(e)),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.timeout=1e4,t.send()}},form.requestParams=function(e){var t="",i=encodeURIComponent;for(var s in e)t+="&"+i(s)+"="+i(e[s]);return t.slice(1)+"&_t="+(new Date).getTime()},form.send=function(e,t){e&&(formSentTry++,t?setTimeout(function(){form.sendRequest(e)},t):form.sendRequest(e))},form.sendButton.viewport.addEventListener("click",function(e){if(e.preventDefault(),!formLocked)if(formSentCount<formSentCountLimit){var t=!0,i="";if(form.fields.cName.value&&form.fields.cMessage.value?form.fields.cPhone.value||form.fields.cEmail.value?form.fields.cPhone.parentNode.classList.contains("is-error")||form.fields.cEmail.parentNode.classList.contains("is-error")?(i="Não foi possível enviar, informe os dados corretamente.",t=!1):t=!0:(i="Não foi possível enviar, informe pelos menos um email ou um telefone.",t=!1):(i="Não foi possível enviar, preencha os campos e tente novamente.",t=!1),t){formLocked=!0,formSentCount++;var s={cName:form.fields.cName.value,cPhone:form.fields.cPhone.value,cEmail:form.fields.cEmail.value,cMessage:form.fields.cMessage.value};form.send(s,!1)}else form.changeStateError("is-error",i)}else form.changeStateError("is-error","Limite de mensagens atingido por sessão.")});var Logo=function(){function e(e,t,i){this.element=e,this.url=t,this.fallback=i,this.get()}return e.prototype.appendTo=function(e,t){t?e.insertBefore(this.element,t):e.appendChild(this.element)},e.prototype.cloneTo=function(e){e.appendChild(this.element.cloneNode(this.element))},e.prototype.get=function(){var e=this;if(this.element&&this.url){var t=new XMLHttpRequest;t.open("GET",this.url,!0),t.onreadystatechange=function(){4===this.readyState&&200==this.status&&this.responseText&&(e.element.innerHTML=this.responseText,e.fallback&&e.fallback())},t.send(),t=null}},e}(),RequiredField=function(){function e(e,t){var i=this;this.viewport=e,this.input={},this.label={},this.fieldClass=t,this.message={label:"",empty:this.viewport.dataset.empty,invalid:this.viewport.dataset.invalid},this.onClick=function(){try{i.input.viewport.focus()}catch(e){}},this.onFocus=function(){i.viewport.classList.add("has-focus")},this.onBlur=function(){i.viewport.classList.remove("has-focus"),i.input.viewport.value?i.validateInput(i.input.viewport)?(i.viewport.classList.add("is-valid"),i.viewport.classList.remove("is-error")):(i.viewport.classList.remove("is-valid"),i.viewport.classList.add("is-error"),i.viewport.classList.add("has-label")):(i.toggleLabel("default"),i.viewport.classList.remove("is-valid"),i.viewport.classList.remove("is-error"))},this.onInput=function(){i.input.viewport.value?(i.viewport.classList.add("has-label"),i.viewport.classList.contains("is-error")?i.validateInput(i.input.viewport)&&(i.viewport.classList.add("is-valid"),i.viewport.classList.remove("is-error")):i.viewport.classList.contains("is-valid")&&(i.validateInput(i.input.viewport)||(i.viewport.classList.remove("is-valid"),i.viewport.classList.add("is-error"),i.viewport.classList.add("has-label")))):i.viewport.classList.remove("has-label")},this.viewport&&this.init()}return e.prototype.normalize=function(){this.input.viewport.value&&this.viewport.classList.add("has-label")},e.prototype.addListeners=function(){try{this.viewport.addEventListener("click",this.onClick,!1),this.input.viewport.addEventListener("focus",this.onFocus,!1),this.input.viewport.addEventListener("blur",this.onBlur,!1),this.input.viewport.addEventListener("input",this.onInput,!1)}catch(e){}},e.prototype.getInputElement=function(){return this.input.viewport=this.viewport.querySelector(this.fieldClass),this.label.viewport=this.viewport.querySelector("label"),this.message.label=this.label.viewport.innerText,!!this.input.viewport},e.prototype.validateInput=function(e){if(""==e.value)return this.toggleLabel("empty"),!1;if(this.toggleLabel("default"),"text"==e.type)return this.toggleLabel("default"),!0;if("email"==e.type){var t=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;return e.validity.valid&&t.test(e.value)?(this.toggleLabel("default"),!0):(this.toggleLabel("invalid"),!1)}if("tel"==e.type){e.value.replace(/\s/g,"").length<=13&&(e.value=e.value.replace(/\s/g,""));var i=/^[+#*]?[0-9]{8,13}$/;return i.test(e.value)?(this.toggleLabel("default"),!0):(this.toggleLabel("invalid"),!1)}return e.validity.valid},e.prototype.toggleLabel=function(e){switch(e){case"invalid":this.label.viewport.innerText=this.message.invalid;break;case"empty":this.label.viewport.innerText=this.message.empty;break;case"default":this.label.viewport.innerText=this.message.label}},e.prototype.init=function(){this.getInputElement()&&this.addListeners(),this.normalize()},e}();